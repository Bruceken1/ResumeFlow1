<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResumeFlow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', system-ui, sans-serif; }
        .glass { background: rgba(255,255,255,0.06); backdrop-filter: blur(16px); }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-950 via-zinc-950 to-black text-white min-h-screen">

    <div class="max-w-3xl mx-auto pt-16 px-6 pb-24">
        <!-- Logo + Header -->
        <div class="flex items-center justify-center gap-4 mb-12">
            <img src="https://i.imgur.com/2bL9f3P.png" alt="ResumeFlow Logo" class="w-12 h-12">
            <h1 class="text-5xl font-bold tracking-tight bg-gradient-to-r from-blue-400 to-violet-500 bg-clip-text text-transparent">
                ResumeFlow
            </h1>
        </div>

        <div class="text-center mb-10">
            <p class="text-xl text-gray-400">AI that turns good resumes into exceptional ones</p>
        </div>

        <!-- Upload Area -->
        <div id="upload-area" class="glass border border-gray-700 hover:border-violet-500 rounded-3xl p-16 text-center transition-all cursor-pointer group">
            <i class="fa-solid fa-cloud-arrow-up text-7xl text-violet-400 mb-8 group-hover:scale-110 transition"></i>
            <h2 class="text-3xl font-semibold mb-3">Drop your resume PDF here</h2>
            <p class="text-gray-400 mb-8">or click to browse • Max 10MB</p>
            <input type="file" id="file-input" accept=".pdf" class="hidden">
        </div>

        <!-- File Info -->
        <div id="file-info" class="hidden mt-8 bg-zinc-900 border border-gray-700 rounded-3xl p-6 flex items-center gap-5">
            <i class="fa-solid fa-file-pdf text-5xl text-red-500"></i>
            <div class="flex-1">
                <p id="filename" class="font-medium text-lg"></p>
                <p id="filesize" class="text-sm text-gray-400"></p>
            </div>
            <button onclick="removeFile()" class="text-red-400 hover:text-red-500 p-3">
                <i class="fa-solid fa-trash text-xl"></i>
            </button>
        </div>

        <!-- Job Description -->
        <div class="mt-10">
            <p class="text-sm text-gray-400 mb-3">Job Description <span class="text-gray-500">(highly recommended)</span></p>
            <textarea id="job-desc" rows="5" 
                class="w-full bg-zinc-900 border border-gray-700 rounded-3xl p-6 focus:outline-none focus:border-violet-500 resize-none"
                placeholder="Paste the full job description here..."></textarea>
        </div>

        <!-- Buttons -->
        <div class="grid grid-cols-2 gap-5 mt-12">
            <button onclick="optimizeResume()" id="optimize-btn"
                class="bg-gradient-to-r from-violet-600 to-indigo-600 py-6 rounded-3xl font-semibold text-lg flex items-center justify-center gap-3 hover:scale-105 transition-all">
                <i class="fa-solid fa-wand-magic-sparkles"></i>
                Optimize Resume
            </button>
            
            <button onclick="generateCover()" id="cover-btn"
                class="bg-gradient-to-r from-emerald-600 to-teal-600 py-6 rounded-3xl font-semibold text-lg flex items-center justify-center gap-3 hover:scale-105 transition-all">
                <i class="fa-solid fa-file-lines"></i>
                Generate Cover Letter
            </button>
        </div>

        <!-- Loading -->
        <div id="loading" class="hidden mt-16 text-center">
            <i class="fa-solid fa-spinner fa-spin text-5xl text-violet-400 mb-6"></i>
            <p class="text-xl font-medium">AI is working its magic...</p>
            <p class="text-gray-400 mt-2">This usually takes 15–35 seconds</p>
        </div>

        <!-- Success -->
        <div id="success" class="hidden mt-16 text-center">
            <div class="inline-flex items-center gap-4 bg-green-900/30 border border-green-700 rounded-3xl px-10 py-6">
                <i class="fa-solid fa-circle-check text-4xl text-green-400"></i>
                <p class="text-2xl font-semibold text-green-400">Your file is ready!</p>
            </div>
            <div class="mt-10">
                <a id="download-btn" href="#" 
                   class="inline-flex items-center gap-3 bg-white text-black px-12 py-5 rounded-3xl font-semibold text-lg hover:bg-gray-200 transition">
                    <i class="fa-solid fa-download"></i>
                    Download File
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="border-t border-gray-800 py-12 mt-20">
        <div class="max-w-3xl mx-auto px-6 text-center text-gray-500 text-sm">
            <p>Made with ❤️ by <strong>Ken K. Founder at Dime Solutions</strong> • Mombasa, Kenya</p>
            <p class="mt-2">AI Resume Optimizer & Cover Letter Generator</p>
            
            <div class="mt-6">
                <a href="https://buymeacoffee.com/yourusername" target="_blank"
                   class="inline-flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-black font-medium px-6 py-3 rounded-2xl transition">
                    <i class="fa-solid fa-mug-hot"></i>
                    Buy Me a Coffee
                </a>
            </div>
            
            <p class="mt-8 text-xs">© 2026 Dime Solutions LTD. All rights reserved.</p>
        </div>
    </footer>

    <script>
        let uploadedFile = null;

        document.getElementById('upload-area').addEventListener('click', () => {
            document.getElementById('file-input').click();
        });

        document.getElementById('file-input').addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                uploadedFile = e.target.files[0];
                document.getElementById('file-info').classList.remove('hidden');
                document.getElementById('filename').textContent = uploadedFile.name;
                document.getElementById('filesize').textContent = (uploadedFile.size / 1024 / 1024).toFixed(2) + " MB";
            }
        });

        function removeFile() {
            uploadedFile = null;
            document.getElementById('file-info').classList.add('hidden');
        }

        async function optimizeResume() {
            await processFile('/optimize/', 'optimize-btn');
        }

        async function generateCover() {
            await processFile('/generate-cover/', 'cover-btn');
        }

        async function processFile(endpoint, btnId) {
            if (!uploadedFile) return alert("Please upload your resume first");

            const loading = document.getElementById('loading');
            const success = document.getElementById('success');
            const btn = document.getElementById(btnId);

            loading.classList.remove('hidden');
            success.classList.add('hidden');
            btn.disabled = true;

            const formData = new FormData();
            formData.append('resume', uploadedFile);

            const jobDesc = document.getElementById('job-desc').value.trim();
            if (jobDesc) formData.append('job_description', jobDesc);

            try {
                const res = await fetch(endpoint, { method: 'POST', body: formData });
                const blob = await res.blob();
                const url = URL.createObjectURL(blob);

                document.getElementById('download-btn').href = url;
                document.getElementById('download-btn').download = endpoint.includes('optimize') ? 
                    'optimized_resume.pdf' : 'cover_letter.pdf';

                loading.classList.add('hidden');
                success.classList.remove('hidden');
            } catch (err) {
                alert("Something went wrong. Please try again.");
                loading.classList.add('hidden');
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>